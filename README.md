# peer_3.1

Функция `LoadPersons` имеет несколько проблем, которые затрудняют ее использование, тестирование и поддержку:

1. Длинный список параметров: функция принимает много параметров, что может быть неудобно для использования и вызова. Также это усложняет тестирование, поскольку требуется передавать все эти параметры.
   
2. Жесткая зависимость от конкретных классов: функция непосредственно создает экземпляры классов `DBConnector`, `DBHandler` и `DBQuery`, что делает ее жестко связанной с этими классами. Это затрудняет замену или изменение этих классов в будущем.

3. Недостаток модульности: функция выполняет сразу несколько задач, включая установку соединения с базой данных, выполнение запроса и обработку результатов. Это усложняет понимание и поддержку кода.

Для рефакторинга я применил следующие шаги:

1. Выделил класс `PersonLoader`, отвечающий за загрузку персон из базы данных.

2. Перенёс логику установки соединения с базой данных и выполнения запроса в отдельные методы этого класса.

3. Использовал конструктор класса `PersonLoader` для передачи параметров, таких как `db_name`, `db_connection_timeout`, `db_allow_exceptions` и `db_log_level`.

4. Разделил метод `LoadPersons` на несколько более маленьких методов, каждый из которых будет выполнять отдельную задачу, например, установку соединения, выполнение запроса и обработку результатов.
